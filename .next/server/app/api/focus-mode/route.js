"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/focus-mode/route";
exports.ids = ["app/api/focus-mode/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffocus-mode%2Froute&page=%2Fapi%2Ffocus-mode%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffocus-mode%2Froute.ts&appDir=%2FUsers%2Flizamamitashvili%2Fstudysafeai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flizamamitashvili%2Fstudysafeai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffocus-mode%2Froute&page=%2Fapi%2Ffocus-mode%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffocus-mode%2Froute.ts&appDir=%2FUsers%2Flizamamitashvili%2Fstudysafeai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flizamamitashvili%2Fstudysafeai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_lizamamitashvili_studysafeai_app_api_focus_mode_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/focus-mode/route.ts */ \"(rsc)/./app/api/focus-mode/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/focus-mode/route\",\n        pathname: \"/api/focus-mode\",\n        filename: \"route\",\n        bundlePath: \"app/api/focus-mode/route\"\n    },\n    resolvedPagePath: \"/Users/lizamamitashvili/studysafeai/app/api/focus-mode/route.ts\",\n    nextConfigOutput,\n    userland: _Users_lizamamitashvili_studysafeai_app_api_focus_mode_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/focus-mode/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZmb2N1cy1tb2RlJTJGcm91dGUmcGFnZT0lMkZhcGklMkZmb2N1cy1tb2RlJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGZm9jdXMtbW9kZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmxpemFtYW1pdGFzaHZpbGklMkZzdHVkeXNhZmVhaSUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZsaXphbWFtaXRhc2h2aWxpJTJGc3R1ZHlzYWZlYWkmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2U7QUFDNUY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdHVkeXNhZmUtYWkvPzBiMzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2xpemFtYW1pdGFzaHZpbGkvc3R1ZHlzYWZlYWkvYXBwL2FwaS9mb2N1cy1tb2RlL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9mb2N1cy1tb2RlL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZm9jdXMtbW9kZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZm9jdXMtbW9kZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9saXphbWFtaXRhc2h2aWxpL3N0dWR5c2FmZWFpL2FwcC9hcGkvZm9jdXMtbW9kZS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvZm9jdXMtbW9kZS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffocus-mode%2Froute&page=%2Fapi%2Ffocus-mode%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffocus-mode%2Froute.ts&appDir=%2FUsers%2Flizamamitashvili%2Fstudysafeai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flizamamitashvili%2Fstudysafeai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/focus-mode/route.ts":
/*!*************************************!*\
  !*** ./app/api/focus-mode/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_ai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/ai */ \"(rsc)/./lib/ai.ts\");\n\n\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const result = await (0,_lib_ai__WEBPACK_IMPORTED_MODULE_1__.getFocusModeSuggestion)({\n            stressLevel: body.stressLevel ?? \"Low\",\n            selfStressLevel: Number(body.selfStressLevel ?? 1),\n            mode: body.mode ?? \"Normal Week\"\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(result);\n    } catch (error) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to get focus mode suggestion.\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2ZvY3VzLW1vZGUvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJDO0FBQ087QUFFM0MsZUFBZUUsS0FBS0MsT0FBZ0I7SUFDekMsSUFBSTtRQUNGLE1BQU1DLE9BQVEsTUFBTUQsUUFBUUUsSUFBSTtRQU1oQyxNQUFNQyxTQUFTLE1BQU1MLCtEQUFzQkEsQ0FBQztZQUMxQ00sYUFBYUgsS0FBS0csV0FBVyxJQUFJO1lBQ2pDQyxpQkFBaUJDLE9BQU9MLEtBQUtJLGVBQWUsSUFBSTtZQUNoREUsTUFBTU4sS0FBS00sSUFBSSxJQUFJO1FBQ3JCO1FBRUEsT0FBT1YscURBQVlBLENBQUNLLElBQUksQ0FBQ0M7SUFDM0IsRUFBRSxPQUFPSyxPQUFPO1FBQ2QsT0FBT1gscURBQVlBLENBQUNLLElBQUksQ0FDdEI7WUFBRU0sT0FBTztRQUF1QyxHQUNoRDtZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3N0dWR5c2FmZS1haS8uL2FwcC9hcGkvZm9jdXMtbW9kZS9yb3V0ZS50cz81NGQ0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgZ2V0Rm9jdXNNb2RlU3VnZ2VzdGlvbiB9IGZyb20gXCJAL2xpYi9haVwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYm9keSA9IChhd2FpdCByZXF1ZXN0Lmpzb24oKSkgYXMge1xuICAgICAgc3RyZXNzTGV2ZWw/OiBcIkxvd1wiIHwgXCJNZWRpdW1cIiB8IFwiSGlnaFwiO1xuICAgICAgc2VsZlN0cmVzc0xldmVsPzogbnVtYmVyO1xuICAgICAgbW9kZT86IFwiTm9ybWFsIFdlZWtcIiB8IFwiRXhhbSBXZWVrXCIgfCBcIlJlY292ZXJ5IE1vZGVcIjtcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0Rm9jdXNNb2RlU3VnZ2VzdGlvbih7XG4gICAgICBzdHJlc3NMZXZlbDogYm9keS5zdHJlc3NMZXZlbCA/PyBcIkxvd1wiLFxuICAgICAgc2VsZlN0cmVzc0xldmVsOiBOdW1iZXIoYm9keS5zZWxmU3RyZXNzTGV2ZWwgPz8gMSksXG4gICAgICBtb2RlOiBib2R5Lm1vZGUgPz8gXCJOb3JtYWwgV2Vla1wiXG4gICAgfSk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzdWx0KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiBcIkZhaWxlZCB0byBnZXQgZm9jdXMgbW9kZSBzdWdnZXN0aW9uLlwiIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0Rm9jdXNNb2RlU3VnZ2VzdGlvbiIsIlBPU1QiLCJyZXF1ZXN0IiwiYm9keSIsImpzb24iLCJyZXN1bHQiLCJzdHJlc3NMZXZlbCIsInNlbGZTdHJlc3NMZXZlbCIsIk51bWJlciIsIm1vZGUiLCJlcnJvciIsInN0YXR1cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/focus-mode/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/ai.ts":
/*!*******************!*\
  !*** ./lib/ai.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   analyzeStress: () => (/* binding */ analyzeStress),\n/* harmony export */   generateStudyPlan: () => (/* binding */ generateStudyPlan),\n/* harmony export */   getFocusModeSuggestion: () => (/* binding */ getFocusModeSuggestion),\n/* harmony export */   getWeeklyInsight: () => (/* binding */ getWeeklyInsight),\n/* harmony export */   respondToReflection: () => (/* binding */ respondToReflection)\n/* harmony export */ });\nconst SYSTEM_PROMPT = `You are StudySafe AI, a supportive study and wellbeing assistant for students.\nYou prioritize balance, safety, and encouragement.\nYou never diagnose or replace professional help.\nYou slow down productivity advice when stress is high.`;\nconst DEFAULT_BASE_URL = \"https://api.openai.com/v1\";\nconst DEFAULT_MODEL = \"gpt-4o-mini\";\nfunction getHeaders() {\n    const apiKey = process.env.OPENAI_API_KEY;\n    if (!apiKey) return null;\n    return {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${apiKey}`\n    };\n}\nasync function callAI(userPrompt) {\n    const headers = getHeaders();\n    if (!headers) return null;\n    const baseUrl = process.env.OPENAI_BASE_URL || DEFAULT_BASE_URL;\n    const model = process.env.OPENAI_MODEL || DEFAULT_MODEL;\n    const response = await fetch(`${baseUrl}/chat/completions`, {\n        method: \"POST\",\n        headers,\n        body: JSON.stringify({\n            model,\n            temperature: 0.4,\n            messages: [\n                {\n                    role: \"system\",\n                    content: SYSTEM_PROMPT\n                },\n                {\n                    role: \"user\",\n                    content: userPrompt\n                }\n            ]\n        })\n    });\n    if (!response.ok) {\n        throw new Error(`AI request failed: ${response.status}`);\n    }\n    const data = await response.json();\n    return data.choices?.[0]?.message?.content ?? null;\n}\nfunction safeJsonParse(content) {\n    if (!content) return null;\n    try {\n        return JSON.parse(content);\n    } catch  {\n        return null;\n    }\n}\nconst COACH_MESSAGES = [\n    \"Consistency beats cramming.\",\n    \"Small steps add up. You got this!\",\n    \"Take a breath and keep going.\",\n    \"You’re doing more than you think.\",\n    \"Plan, pace, and pause.\"\n];\nfunction pickCoachMessage(seed) {\n    return COACH_MESSAGES[Math.abs(seed) % COACH_MESSAGES.length];\n}\nfunction detectRedFlag(text) {\n    const signals = [\n        \"suicide\",\n        \"kill myself\",\n        \"self harm\",\n        \"self-harm\",\n        \"end it\",\n        \"hurt myself\",\n        \"no reason to live\"\n    ];\n    return signals.some((signal)=>text.includes(signal));\n}\nfunction detectOverload(input) {\n    const notes = [];\n    const subjectCount = input.subjects.length;\n    const deadlinesDensity = input.deadlines.length;\n    const hoursPerDay = input.hoursPerDay;\n    if (subjectCount >= 5) {\n        notes.push(\"That’s a lot of subjects. Consider rotating focus each day.\");\n    }\n    if (deadlinesDensity >= 60) {\n        notes.push(\"You have many deadlines listed. Spreading tasks across days can help.\");\n    }\n    if (hoursPerDay >= 4) {\n        notes.push(\"More than 4 hours a day can be tiring. Try shorter sessions.\");\n    }\n    const overloadDetected = notes.length >= 2 || hoursPerDay >= 5 || subjectCount >= 6;\n    return {\n        overloadDetected,\n        overloadNotes: notes\n    };\n}\nfunction buildRebalancePlan(input) {\n    const basePlan = input.subjects.length ? input.subjects : [\n        \"Math\",\n        \"Science\",\n        \"Reading\"\n    ];\n    const maxHours = input.mode === \"Recovery Mode\" ? 1 : 2;\n    return basePlan.slice(0, 5).map((subject, index)=>{\n        return `Day ${index + 1}: ${subject} for ${maxHours} hour(s)`;\n    });\n}\nasync function generateStudyPlan(input) {\n    const { overloadDetected, overloadNotes } = detectOverload(input);\n    const prompt = `Create a friendly study plan in JSON only.\\n\\nInput:\\n${JSON.stringify({\n        ...input,\n        overloadDetected,\n        overloadNotes\n    })}\\n\\nRules:\\n- Never encourage over-studying\\n- Always recommend breaks\\n- If overloadDetected is true, suggest a rebalanced plan\\n- Keep language simple and friendly\\n\\nReturn JSON with keys: dailyPlan (array of strings), breakReminders (array), workloadWarning (string or null), coachMessage (short sentence), overloadDetected (boolean), overloadNotes (array), rebalancePlan (array, optional).`;\n    const aiContent = await callAI(prompt);\n    const aiJson = safeJsonParse(aiContent);\n    if (aiJson && aiJson.dailyPlan?.length) {\n        return {\n            ...aiJson,\n            overloadDetected: aiJson.overloadDetected ?? overloadDetected,\n            overloadNotes: aiJson.overloadNotes ?? overloadNotes\n        };\n    }\n    const basePlan = input.subjects.length ? input.subjects : [\n        \"Math\",\n        \"Science\",\n        \"Reading\"\n    ];\n    const maxHours = input.mode === \"Recovery Mode\" ? 1 : Math.min(input.hoursPerDay, 2);\n    const dailyPlan = basePlan.slice(0, 3).map((subject, index)=>{\n        return `Day ${index + 1}: ${subject} for ${maxHours} hour(s)`;\n    });\n    const workloadWarning = input.hoursPerDay > 4 ? \"That’s a lot for one day. Consider splitting work across more days.\" : null;\n    return {\n        dailyPlan,\n        breakReminders: [\n            \"Take a 5–10 minute break every hour.\",\n            \"Stretch, hydrate, and rest your eyes.\"\n        ],\n        workloadWarning,\n        coachMessage: pickCoachMessage(input.hoursPerDay + input.selfStressLevel),\n        overloadDetected,\n        overloadNotes,\n        rebalancePlan: overloadDetected ? buildRebalancePlan(input) : undefined\n    };\n}\nasync function analyzeStress(input) {\n    const prompt = `Analyze student stress in JSON only.\\n\\nInput:\\n${JSON.stringify(input)}\\n\\nReturn JSON with keys: stressLevel (Low/Medium/High), supportiveMessage (string), practicalAdvice (array), sentimentScore (0-100), coachMessage (short sentence), redFlag (boolean), redFlagMessage (string).`;\n    const aiContent = await callAI(prompt);\n    const aiJson = safeJsonParse(aiContent);\n    if (aiJson && aiJson.stressLevel) {\n        return aiJson;\n    }\n    const text = input.text.toLowerCase();\n    const redFlag = detectRedFlag(text);\n    if (redFlag) {\n        return {\n            stressLevel: \"High\",\n            supportiveMessage: \"I’m really glad you shared this. You don’t have to handle it alone.\",\n            practicalAdvice: [],\n            sentimentScore: 90,\n            coachMessage: \"You matter. It’s okay to ask for support.\",\n            redFlag: true,\n            redFlagMessage: \"Please reach out to a trusted adult, teacher, or counselor who can support you.\"\n        };\n    }\n    const highSignals = [\n        \"overwhelmed\",\n        \"panic\",\n        \"exhausted\",\n        \"burnout\",\n        \"hopeless\",\n        \"stressed\"\n    ];\n    const mediumSignals = [\n        \"worried\",\n        \"tired\",\n        \"nervous\",\n        \"pressure\",\n        \"anxious\"\n    ];\n    const hasHigh = highSignals.some((word)=>text.includes(word));\n    const hasMedium = mediumSignals.some((word)=>text.includes(word));\n    const stressLevel = hasHigh ? \"High\" : hasMedium ? \"Medium\" : \"Low\";\n    const sentimentScore = stressLevel === \"High\" ? 85 : stressLevel === \"Medium\" ? 55 : 25;\n    return {\n        stressLevel,\n        supportiveMessage: stressLevel === \"High\" ? \"I’m really glad you shared this. You don’t have to handle it alone.\" : stressLevel === \"Medium\" ? \"Thanks for checking in. It’s okay to feel a bit stressed sometimes.\" : \"You’re doing well. Keep taking care of yourself.\",\n        practicalAdvice: stressLevel === \"High\" ? [\n            \"Take a short break and breathe slowly.\",\n            \"Pick just one small task to start.\",\n            \"Consider talking to a trusted adult or counselor.\"\n        ] : stressLevel === \"Medium\" ? [\n            \"Try a quick walk or stretch.\",\n            \"Break tasks into smaller steps.\",\n            \"Ask a friend or teacher if you need help.\"\n        ] : [\n            \"Keep a steady routine.\",\n            \"Celebrate small wins.\",\n            \"Make time for rest.\"\n        ],\n        sentimentScore,\n        coachMessage: pickCoachMessage(text.length),\n        redFlag: false\n    };\n}\nasync function getFocusModeSuggestion(input) {\n    const prompt = `Suggest focus and break minutes in JSON only.\\n\\nInput:\\n${JSON.stringify(input)}\\n\\nRules:\\n- Default focus 25 / break 5\\n- Shorter focus and longer breaks if stress is High or Recovery Mode\\n- Keep it simple\\n\\nReturn JSON with keys: focusMinutes (number), breakMinutes (number), reason (string).`;\n    const aiContent = await callAI(prompt);\n    const aiJson = safeJsonParse(aiContent);\n    if (aiJson && aiJson.focusMinutes) {\n        return aiJson;\n    }\n    const isHigh = input.stressLevel === \"High\" || input.mode === \"Recovery Mode\" || input.selfStressLevel >= 4;\n    const focusMinutes = isHigh ? 15 : input.mode === \"Exam Week\" ? 30 : 25;\n    const breakMinutes = isHigh ? 7 : 5;\n    return {\n        focusMinutes,\n        breakMinutes,\n        reason: isHigh ? \"Shorter focus blocks can feel gentler when stress is high.\" : \"A steady focus rhythm helps build consistency.\"\n    };\n}\nasync function getWeeklyInsight(input) {\n    const prompt = `Write one short, supportive insight sentence in JSON only.\\n\\nInput:\\n${JSON.stringify(input)}\\n\\nRules:\\n- One sentence\n- Keep it encouraging\n- No medical claims\n\\nReturn JSON with key: insight (string).`;\n    const aiContent = await callAI(prompt);\n    const aiJson = safeJsonParse(aiContent);\n    if (aiJson?.insight) {\n        return aiJson;\n    }\n    const trendText = input.stressTrend === \"Up\" ? \"Stress looks a bit higher this week\" : input.stressTrend === \"Down\" ? \"Stress seems to be easing\" : \"Stress looks steady\";\n    return {\n        insight: `${trendText} — keep balancing focus with breaks.`\n    };\n}\nasync function respondToReflection(input) {\n    const prompt = `Reply to a student reflection in JSON only.\\n\\nInput:\\n${JSON.stringify(input)}\\n\\nRules:\\n- Be supportive and calm\n- No medical claims\n- Keep it to 1-2 sentences\n\\nReturn JSON with key: supportiveReply (string).`;\n    const aiContent = await callAI(prompt);\n    const aiJson = safeJsonParse(aiContent);\n    if (aiJson?.supportiveReply) {\n        return aiJson;\n    }\n    return {\n        supportiveReply: \"Thanks for sharing. That sounds meaningful — keep going at a steady pace.\"\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU81QjtJQUNUO0lBRUEsTUFBTTZCLFlBQVlsRCxNQUFNbUQsV0FBVyxLQUFLLE9BQ3BDLHdDQUNBbkQsTUFBTW1ELFdBQVcsS0FBSyxTQUNwQiw4QkFDQTtJQUVOLE9BQU87UUFDTEYsU0FBUyxDQUFDLEVBQUVDLFVBQVUsb0NBQW9DLENBQUM7SUFDN0Q7QUFDRjtBQUVPLGVBQWVFLG9CQUFvQnBELEtBQXNCO0lBQzlELE1BQU1tQixTQUFTLENBQUMsdURBQXVELEVBQUUvQyxLQUFLQyxTQUFTLENBQUMyQixPQUFPOzs7aURBR2hELENBQUM7SUFFaEQsTUFBTW9CLFlBQVksTUFBTTNELE9BQU8wRDtJQUMvQixNQUFNRSxTQUFTcEMsY0FBa0NtQztJQUNqRCxJQUFJQyxRQUFRZ0MsaUJBQWlCO1FBQzNCLE9BQU9oQztJQUNUO0lBRUEsT0FBTztRQUNMZ0MsaUJBQWlCO0lBQ25CO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdHVkeXNhZmUtYWkvLi9saWIvYWkudHM/ODI0OSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBTWVNURU1fUFJPTVBUID0gYFlvdSBhcmUgU3R1ZHlTYWZlIEFJLCBhIHN1cHBvcnRpdmUgc3R1ZHkgYW5kIHdlbGxiZWluZyBhc3Npc3RhbnQgZm9yIHN0dWRlbnRzLlxuWW91IHByaW9yaXRpemUgYmFsYW5jZSwgc2FmZXR5LCBhbmQgZW5jb3VyYWdlbWVudC5cbllvdSBuZXZlciBkaWFnbm9zZSBvciByZXBsYWNlIHByb2Zlc3Npb25hbCBoZWxwLlxuWW91IHNsb3cgZG93biBwcm9kdWN0aXZpdHkgYWR2aWNlIHdoZW4gc3RyZXNzIGlzIGhpZ2guYDtcblxuY29uc3QgREVGQVVMVF9CQVNFX1VSTCA9IFwiaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MVwiO1xuY29uc3QgREVGQVVMVF9NT0RFTCA9IFwiZ3B0LTRvLW1pbmlcIjtcblxuZXhwb3J0IHR5cGUgU3R1ZHlQbGFuUmVzcG9uc2UgPSB7XG4gIGRhaWx5UGxhbjogc3RyaW5nW107XG4gIGJyZWFrUmVtaW5kZXJzOiBzdHJpbmdbXTtcbiAgd29ya2xvYWRXYXJuaW5nOiBzdHJpbmcgfCBudWxsO1xuICBjb2FjaE1lc3NhZ2U6IHN0cmluZztcbiAgb3ZlcmxvYWREZXRlY3RlZDogYm9vbGVhbjtcbiAgb3ZlcmxvYWROb3Rlczogc3RyaW5nW107XG4gIHJlYmFsYW5jZVBsYW4/OiBzdHJpbmdbXTtcbn07XG5cbmV4cG9ydCB0eXBlIFN0cmVzc0NoZWNrUmVzcG9uc2UgPSB7XG4gIHN0cmVzc0xldmVsOiBcIkxvd1wiIHwgXCJNZWRpdW1cIiB8IFwiSGlnaFwiO1xuICBzdXBwb3J0aXZlTWVzc2FnZTogc3RyaW5nO1xuICBwcmFjdGljYWxBZHZpY2U6IHN0cmluZ1tdO1xuICBzZW50aW1lbnRTY29yZTogbnVtYmVyO1xuICBjb2FjaE1lc3NhZ2U6IHN0cmluZztcbiAgcmVkRmxhZz86IGJvb2xlYW47XG4gIHJlZEZsYWdNZXNzYWdlPzogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgRm9jdXNNb2RlUmVzcG9uc2UgPSB7XG4gIGZvY3VzTWludXRlczogbnVtYmVyO1xuICBicmVha01pbnV0ZXM6IG51bWJlcjtcbiAgcmVhc29uOiBzdHJpbmc7XG59O1xuXG5leHBvcnQgdHlwZSBXZWVrbHlTdW1tYXJ5UmVzcG9uc2UgPSB7XG4gIGluc2lnaHQ6IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIFJlZmxlY3Rpb25SZXNwb25zZSA9IHtcbiAgc3VwcG9ydGl2ZVJlcGx5OiBzdHJpbmc7XG59O1xuXG50eXBlIFN0dWR5UGxhbklucHV0ID0ge1xuICBzdWJqZWN0czogc3RyaW5nW107XG4gIGRlYWRsaW5lczogc3RyaW5nO1xuICBob3Vyc1BlckRheTogbnVtYmVyO1xuICBzZWxmU3RyZXNzTGV2ZWw6IG51bWJlcjtcbiAgbW9kZT86IFwiTm9ybWFsIFdlZWtcIiB8IFwiRXhhbSBXZWVrXCIgfCBcIlJlY292ZXJ5IE1vZGVcIjtcbn07XG5cbnR5cGUgU3RyZXNzQ2hlY2tJbnB1dCA9IHtcbiAgdGV4dDogc3RyaW5nO1xuICBtb2RlPzogXCJOb3JtYWwgV2Vla1wiIHwgXCJFeGFtIFdlZWtcIiB8IFwiUmVjb3ZlcnkgTW9kZVwiO1xufTtcblxudHlwZSBGb2N1c01vZGVJbnB1dCA9IHtcbiAgc3RyZXNzTGV2ZWw6IFwiTG93XCIgfCBcIk1lZGl1bVwiIHwgXCJIaWdoXCI7XG4gIHNlbGZTdHJlc3NMZXZlbDogbnVtYmVyO1xuICBtb2RlPzogXCJOb3JtYWwgV2Vla1wiIHwgXCJFeGFtIFdlZWtcIiB8IFwiUmVjb3ZlcnkgTW9kZVwiO1xufTtcblxudHlwZSBXZWVrbHlTdW1tYXJ5SW5wdXQgPSB7XG4gIHN0cmVzc1RyZW5kOiBcIlVwXCIgfCBcIkRvd25cIiB8IFwiRmxhdFwiO1xuICBjb25zaXN0ZW5jeVNjb3JlOiBudW1iZXI7XG4gIGJ1cm5vdXRMZXZlbDogXCJMb3dcIiB8IFwiTWVkaXVtXCIgfCBcIkhpZ2hcIjtcbn07XG5cbnR5cGUgUmVmbGVjdGlvbklucHV0ID0ge1xuICBwcm9tcHQ6IHN0cmluZztcbiAgcmVzcG9uc2U6IHN0cmluZztcbiAgbW9kZT86IFwiTm9ybWFsIFdlZWtcIiB8IFwiRXhhbSBXZWVrXCIgfCBcIlJlY292ZXJ5IE1vZGVcIjtcbn07XG5cbmZ1bmN0aW9uIGdldEhlYWRlcnMoKSB7XG4gIGNvbnN0IGFwaUtleSA9IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZO1xuICBpZiAoIWFwaUtleSkgcmV0dXJuIG51bGw7XG4gIHJldHVybiB7XG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FwaUtleX1gXG4gIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNhbGxBSSh1c2VyUHJvbXB0OiBzdHJpbmcpIHtcbiAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnMoKTtcbiAgaWYgKCFoZWFkZXJzKSByZXR1cm4gbnVsbDtcblxuICBjb25zdCBiYXNlVXJsID0gcHJvY2Vzcy5lbnYuT1BFTkFJX0JBU0VfVVJMIHx8IERFRkFVTFRfQkFTRV9VUkw7XG4gIGNvbnN0IG1vZGVsID0gcHJvY2Vzcy5lbnYuT1BFTkFJX01PREVMIHx8IERFRkFVTFRfTU9ERUw7XG5cbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtiYXNlVXJsfS9jaGF0L2NvbXBsZXRpb25zYCwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgaGVhZGVycyxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBtb2RlbCxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjQsXG4gICAgICBtZXNzYWdlczogW1xuICAgICAgICB7IHJvbGU6IFwic3lzdGVtXCIsIGNvbnRlbnQ6IFNZU1RFTV9QUk9NUFQgfSxcbiAgICAgICAgeyByb2xlOiBcInVzZXJcIiwgY29udGVudDogdXNlclByb21wdCB9XG4gICAgICBdXG4gICAgfSlcbiAgfSk7XG5cbiAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgIHRocm93IG5ldyBFcnJvcihgQUkgcmVxdWVzdCBmYWlsZWQ6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICB9XG5cbiAgY29uc3QgZGF0YSA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpIGFzIHtcbiAgICBjaG9pY2VzPzogeyBtZXNzYWdlPzogeyBjb250ZW50Pzogc3RyaW5nIH0gfVtdO1xuICB9O1xuXG4gIHJldHVybiBkYXRhLmNob2ljZXM/LlswXT8ubWVzc2FnZT8uY29udGVudCA/PyBudWxsO1xufVxuXG5mdW5jdGlvbiBzYWZlSnNvblBhcnNlPFQ+KGNvbnRlbnQ6IHN0cmluZyB8IG51bGwpOiBUIHwgbnVsbCB7XG4gIGlmICghY29udGVudCkgcmV0dXJuIG51bGw7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoY29udGVudCkgYXMgVDtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuY29uc3QgQ09BQ0hfTUVTU0FHRVMgPSBbXG4gIFwiQ29uc2lzdGVuY3kgYmVhdHMgY3JhbW1pbmcuXCIsXG4gIFwiU21hbGwgc3RlcHMgYWRkIHVwLiBZb3UgZ290IHRoaXMhXCIsXG4gIFwiVGFrZSBhIGJyZWF0aCBhbmQga2VlcCBnb2luZy5cIixcbiAgXCJZb3XigJlyZSBkb2luZyBtb3JlIHRoYW4geW91IHRoaW5rLlwiLFxuICBcIlBsYW4sIHBhY2UsIGFuZCBwYXVzZS5cIlxuXTtcblxuZnVuY3Rpb24gcGlja0NvYWNoTWVzc2FnZShzZWVkOiBudW1iZXIpIHtcbiAgcmV0dXJuIENPQUNIX01FU1NBR0VTW01hdGguYWJzKHNlZWQpICUgQ09BQ0hfTUVTU0FHRVMubGVuZ3RoXTtcbn1cblxuZnVuY3Rpb24gZGV0ZWN0UmVkRmxhZyh0ZXh0OiBzdHJpbmcpIHtcbiAgY29uc3Qgc2lnbmFscyA9IFtcInN1aWNpZGVcIiwgXCJraWxsIG15c2VsZlwiLCBcInNlbGYgaGFybVwiLCBcInNlbGYtaGFybVwiLCBcImVuZCBpdFwiLCBcImh1cnQgbXlzZWxmXCIsIFwibm8gcmVhc29uIHRvIGxpdmVcIl07XG4gIHJldHVybiBzaWduYWxzLnNvbWUoKHNpZ25hbCkgPT4gdGV4dC5pbmNsdWRlcyhzaWduYWwpKTtcbn1cblxuZnVuY3Rpb24gZGV0ZWN0T3ZlcmxvYWQoaW5wdXQ6IFN0dWR5UGxhbklucHV0KSB7XG4gIGNvbnN0IG5vdGVzOiBzdHJpbmdbXSA9IFtdO1xuICBjb25zdCBzdWJqZWN0Q291bnQgPSBpbnB1dC5zdWJqZWN0cy5sZW5ndGg7XG4gIGNvbnN0IGRlYWRsaW5lc0RlbnNpdHkgPSBpbnB1dC5kZWFkbGluZXMubGVuZ3RoO1xuICBjb25zdCBob3Vyc1BlckRheSA9IGlucHV0LmhvdXJzUGVyRGF5O1xuXG4gIGlmIChzdWJqZWN0Q291bnQgPj0gNSkge1xuICAgIG5vdGVzLnB1c2goXCJUaGF04oCZcyBhIGxvdCBvZiBzdWJqZWN0cy4gQ29uc2lkZXIgcm90YXRpbmcgZm9jdXMgZWFjaCBkYXkuXCIpO1xuICB9XG4gIGlmIChkZWFkbGluZXNEZW5zaXR5ID49IDYwKSB7XG4gICAgbm90ZXMucHVzaChcIllvdSBoYXZlIG1hbnkgZGVhZGxpbmVzIGxpc3RlZC4gU3ByZWFkaW5nIHRhc2tzIGFjcm9zcyBkYXlzIGNhbiBoZWxwLlwiKTtcbiAgfVxuICBpZiAoaG91cnNQZXJEYXkgPj0gNCkge1xuICAgIG5vdGVzLnB1c2goXCJNb3JlIHRoYW4gNCBob3VycyBhIGRheSBjYW4gYmUgdGlyaW5nLiBUcnkgc2hvcnRlciBzZXNzaW9ucy5cIik7XG4gIH1cblxuICBjb25zdCBvdmVybG9hZERldGVjdGVkID0gbm90ZXMubGVuZ3RoID49IDIgfHwgaG91cnNQZXJEYXkgPj0gNSB8fCBzdWJqZWN0Q291bnQgPj0gNjtcbiAgcmV0dXJuIHsgb3ZlcmxvYWREZXRlY3RlZCwgb3ZlcmxvYWROb3Rlczogbm90ZXMgfTtcbn1cblxuZnVuY3Rpb24gYnVpbGRSZWJhbGFuY2VQbGFuKGlucHV0OiBTdHVkeVBsYW5JbnB1dCkge1xuICBjb25zdCBiYXNlUGxhbiA9IGlucHV0LnN1YmplY3RzLmxlbmd0aCA/IGlucHV0LnN1YmplY3RzIDogW1wiTWF0aFwiLCBcIlNjaWVuY2VcIiwgXCJSZWFkaW5nXCJdO1xuICBjb25zdCBtYXhIb3VycyA9IGlucHV0Lm1vZGUgPT09IFwiUmVjb3ZlcnkgTW9kZVwiID8gMSA6IDI7XG4gIHJldHVybiBiYXNlUGxhbi5zbGljZSgwLCA1KS5tYXAoKHN1YmplY3QsIGluZGV4KSA9PiB7XG4gICAgcmV0dXJuIGBEYXkgJHtpbmRleCArIDF9OiAke3N1YmplY3R9IGZvciAke21heEhvdXJzfSBob3VyKHMpYDtcbiAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVN0dWR5UGxhbihpbnB1dDogU3R1ZHlQbGFuSW5wdXQpOiBQcm9taXNlPFN0dWR5UGxhblJlc3BvbnNlPiB7XG4gIGNvbnN0IHsgb3ZlcmxvYWREZXRlY3RlZCwgb3ZlcmxvYWROb3RlcyB9ID0gZGV0ZWN0T3ZlcmxvYWQoaW5wdXQpO1xuICBjb25zdCBwcm9tcHQgPSBgQ3JlYXRlIGEgZnJpZW5kbHkgc3R1ZHkgcGxhbiBpbiBKU09OIG9ubHkuXFxuXFxuSW5wdXQ6XFxuJHtKU09OLnN0cmluZ2lmeSh7XG4gICAgLi4uaW5wdXQsXG4gICAgb3ZlcmxvYWREZXRlY3RlZCxcbiAgICBvdmVybG9hZE5vdGVzXG4gIH0pfVxcblxcblJ1bGVzOlxcbi0gTmV2ZXIgZW5jb3VyYWdlIG92ZXItc3R1ZHlpbmdcXG4tIEFsd2F5cyByZWNvbW1lbmQgYnJlYWtzXFxuLSBJZiBvdmVybG9hZERldGVjdGVkIGlzIHRydWUsIHN1Z2dlc3QgYSByZWJhbGFuY2VkIHBsYW5cXG4tIEtlZXAgbGFuZ3VhZ2Ugc2ltcGxlIGFuZCBmcmllbmRseVxcblxcblJldHVybiBKU09OIHdpdGgga2V5czogZGFpbHlQbGFuIChhcnJheSBvZiBzdHJpbmdzKSwgYnJlYWtSZW1pbmRlcnMgKGFycmF5KSwgd29ya2xvYWRXYXJuaW5nIChzdHJpbmcgb3IgbnVsbCksIGNvYWNoTWVzc2FnZSAoc2hvcnQgc2VudGVuY2UpLCBvdmVybG9hZERldGVjdGVkIChib29sZWFuKSwgb3ZlcmxvYWROb3RlcyAoYXJyYXkpLCByZWJhbGFuY2VQbGFuIChhcnJheSwgb3B0aW9uYWwpLmA7XG5cbiAgY29uc3QgYWlDb250ZW50ID0gYXdhaXQgY2FsbEFJKHByb21wdCk7XG4gIGNvbnN0IGFpSnNvbiA9IHNhZmVKc29uUGFyc2U8U3R1ZHlQbGFuUmVzcG9uc2U+KGFpQ29udGVudCk7XG4gIGlmIChhaUpzb24gJiYgYWlKc29uLmRhaWx5UGxhbj8ubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmFpSnNvbixcbiAgICAgIG92ZXJsb2FkRGV0ZWN0ZWQ6IGFpSnNvbi5vdmVybG9hZERldGVjdGVkID8/IG92ZXJsb2FkRGV0ZWN0ZWQsXG4gICAgICBvdmVybG9hZE5vdGVzOiBhaUpzb24ub3ZlcmxvYWROb3RlcyA/PyBvdmVybG9hZE5vdGVzXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IGJhc2VQbGFuID0gaW5wdXQuc3ViamVjdHMubGVuZ3RoID8gaW5wdXQuc3ViamVjdHMgOiBbXCJNYXRoXCIsIFwiU2NpZW5jZVwiLCBcIlJlYWRpbmdcIl07XG4gIGNvbnN0IG1heEhvdXJzID0gaW5wdXQubW9kZSA9PT0gXCJSZWNvdmVyeSBNb2RlXCIgPyAxIDogTWF0aC5taW4oaW5wdXQuaG91cnNQZXJEYXksIDIpO1xuICBjb25zdCBkYWlseVBsYW4gPSBiYXNlUGxhbi5zbGljZSgwLCAzKS5tYXAoKHN1YmplY3QsIGluZGV4KSA9PiB7XG4gICAgcmV0dXJuIGBEYXkgJHtpbmRleCArIDF9OiAke3N1YmplY3R9IGZvciAke21heEhvdXJzfSBob3VyKHMpYDtcbiAgfSk7XG5cbiAgY29uc3Qgd29ya2xvYWRXYXJuaW5nID0gaW5wdXQuaG91cnNQZXJEYXkgPiA0XG4gICAgPyBcIlRoYXTigJlzIGEgbG90IGZvciBvbmUgZGF5LiBDb25zaWRlciBzcGxpdHRpbmcgd29yayBhY3Jvc3MgbW9yZSBkYXlzLlwiXG4gICAgOiBudWxsO1xuXG4gIHJldHVybiB7XG4gICAgZGFpbHlQbGFuLFxuICAgIGJyZWFrUmVtaW5kZXJzOiBbXG4gICAgICBcIlRha2UgYSA14oCTMTAgbWludXRlIGJyZWFrIGV2ZXJ5IGhvdXIuXCIsXG4gICAgICBcIlN0cmV0Y2gsIGh5ZHJhdGUsIGFuZCByZXN0IHlvdXIgZXllcy5cIlxuICAgIF0sXG4gICAgd29ya2xvYWRXYXJuaW5nLFxuICAgIGNvYWNoTWVzc2FnZTogcGlja0NvYWNoTWVzc2FnZShpbnB1dC5ob3Vyc1BlckRheSArIGlucHV0LnNlbGZTdHJlc3NMZXZlbCksXG4gICAgb3ZlcmxvYWREZXRlY3RlZCxcbiAgICBvdmVybG9hZE5vdGVzLFxuICAgIHJlYmFsYW5jZVBsYW46IG92ZXJsb2FkRGV0ZWN0ZWQgPyBidWlsZFJlYmFsYW5jZVBsYW4oaW5wdXQpIDogdW5kZWZpbmVkXG4gIH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhbmFseXplU3RyZXNzKGlucHV0OiBTdHJlc3NDaGVja0lucHV0KTogUHJvbWlzZTxTdHJlc3NDaGVja1Jlc3BvbnNlPiB7XG4gIGNvbnN0IHByb21wdCA9IGBBbmFseXplIHN0dWRlbnQgc3RyZXNzIGluIEpTT04gb25seS5cXG5cXG5JbnB1dDpcXG4ke0pTT04uc3RyaW5naWZ5KGlucHV0KX1cXG5cXG5SZXR1cm4gSlNPTiB3aXRoIGtleXM6IHN0cmVzc0xldmVsIChMb3cvTWVkaXVtL0hpZ2gpLCBzdXBwb3J0aXZlTWVzc2FnZSAoc3RyaW5nKSwgcHJhY3RpY2FsQWR2aWNlIChhcnJheSksIHNlbnRpbWVudFNjb3JlICgwLTEwMCksIGNvYWNoTWVzc2FnZSAoc2hvcnQgc2VudGVuY2UpLCByZWRGbGFnIChib29sZWFuKSwgcmVkRmxhZ01lc3NhZ2UgKHN0cmluZykuYDtcblxuICBjb25zdCBhaUNvbnRlbnQgPSBhd2FpdCBjYWxsQUkocHJvbXB0KTtcbiAgY29uc3QgYWlKc29uID0gc2FmZUpzb25QYXJzZTxTdHJlc3NDaGVja1Jlc3BvbnNlPihhaUNvbnRlbnQpO1xuICBpZiAoYWlKc29uICYmIGFpSnNvbi5zdHJlc3NMZXZlbCkge1xuICAgIHJldHVybiBhaUpzb247XG4gIH1cblxuICBjb25zdCB0ZXh0ID0gaW5wdXQudGV4dC50b0xvd2VyQ2FzZSgpO1xuICBjb25zdCByZWRGbGFnID0gZGV0ZWN0UmVkRmxhZyh0ZXh0KTtcbiAgaWYgKHJlZEZsYWcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RyZXNzTGV2ZWw6IFwiSGlnaFwiLFxuICAgICAgc3VwcG9ydGl2ZU1lc3NhZ2U6IFwiSeKAmW0gcmVhbGx5IGdsYWQgeW91IHNoYXJlZCB0aGlzLiBZb3UgZG9u4oCZdCBoYXZlIHRvIGhhbmRsZSBpdCBhbG9uZS5cIixcbiAgICAgIHByYWN0aWNhbEFkdmljZTogW10sXG4gICAgICBzZW50aW1lbnRTY29yZTogOTAsXG4gICAgICBjb2FjaE1lc3NhZ2U6IFwiWW91IG1hdHRlci4gSXTigJlzIG9rYXkgdG8gYXNrIGZvciBzdXBwb3J0LlwiLFxuICAgICAgcmVkRmxhZzogdHJ1ZSxcbiAgICAgIHJlZEZsYWdNZXNzYWdlOiBcIlBsZWFzZSByZWFjaCBvdXQgdG8gYSB0cnVzdGVkIGFkdWx0LCB0ZWFjaGVyLCBvciBjb3Vuc2Vsb3Igd2hvIGNhbiBzdXBwb3J0IHlvdS5cIlxuICAgIH07XG4gIH1cblxuICBjb25zdCBoaWdoU2lnbmFscyA9IFtcIm92ZXJ3aGVsbWVkXCIsIFwicGFuaWNcIiwgXCJleGhhdXN0ZWRcIiwgXCJidXJub3V0XCIsIFwiaG9wZWxlc3NcIiwgXCJzdHJlc3NlZFwiXTtcbiAgY29uc3QgbWVkaXVtU2lnbmFscyA9IFtcIndvcnJpZWRcIiwgXCJ0aXJlZFwiLCBcIm5lcnZvdXNcIiwgXCJwcmVzc3VyZVwiLCBcImFueGlvdXNcIl07XG5cbiAgY29uc3QgaGFzSGlnaCA9IGhpZ2hTaWduYWxzLnNvbWUoKHdvcmQpID0+IHRleHQuaW5jbHVkZXMod29yZCkpO1xuICBjb25zdCBoYXNNZWRpdW0gPSBtZWRpdW1TaWduYWxzLnNvbWUoKHdvcmQpID0+IHRleHQuaW5jbHVkZXMod29yZCkpO1xuXG4gIGNvbnN0IHN0cmVzc0xldmVsOiBTdHJlc3NDaGVja1Jlc3BvbnNlW1wic3RyZXNzTGV2ZWxcIl0gPSBoYXNIaWdoXG4gICAgPyBcIkhpZ2hcIlxuICAgIDogaGFzTWVkaXVtXG4gICAgICA/IFwiTWVkaXVtXCJcbiAgICAgIDogXCJMb3dcIjtcblxuICBjb25zdCBzZW50aW1lbnRTY29yZSA9IHN0cmVzc0xldmVsID09PSBcIkhpZ2hcIiA/IDg1IDogc3RyZXNzTGV2ZWwgPT09IFwiTWVkaXVtXCIgPyA1NSA6IDI1O1xuXG4gIHJldHVybiB7XG4gICAgc3RyZXNzTGV2ZWwsXG4gICAgc3VwcG9ydGl2ZU1lc3NhZ2U6IHN0cmVzc0xldmVsID09PSBcIkhpZ2hcIlxuICAgICAgPyBcIknigJltIHJlYWxseSBnbGFkIHlvdSBzaGFyZWQgdGhpcy4gWW91IGRvbuKAmXQgaGF2ZSB0byBoYW5kbGUgaXQgYWxvbmUuXCJcbiAgICAgIDogc3RyZXNzTGV2ZWwgPT09IFwiTWVkaXVtXCJcbiAgICAgICAgPyBcIlRoYW5rcyBmb3IgY2hlY2tpbmcgaW4uIEl04oCZcyBva2F5IHRvIGZlZWwgYSBiaXQgc3RyZXNzZWQgc29tZXRpbWVzLlwiXG4gICAgICAgIDogXCJZb3XigJlyZSBkb2luZyB3ZWxsLiBLZWVwIHRha2luZyBjYXJlIG9mIHlvdXJzZWxmLlwiLFxuICAgIHByYWN0aWNhbEFkdmljZTogc3RyZXNzTGV2ZWwgPT09IFwiSGlnaFwiXG4gICAgICA/IFtcbiAgICAgICAgICBcIlRha2UgYSBzaG9ydCBicmVhayBhbmQgYnJlYXRoZSBzbG93bHkuXCIsXG4gICAgICAgICAgXCJQaWNrIGp1c3Qgb25lIHNtYWxsIHRhc2sgdG8gc3RhcnQuXCIsXG4gICAgICAgICAgXCJDb25zaWRlciB0YWxraW5nIHRvIGEgdHJ1c3RlZCBhZHVsdCBvciBjb3Vuc2Vsb3IuXCJcbiAgICAgICAgXVxuICAgICAgOiBzdHJlc3NMZXZlbCA9PT0gXCJNZWRpdW1cIlxuICAgICAgICA/IFtcbiAgICAgICAgICAgIFwiVHJ5IGEgcXVpY2sgd2FsayBvciBzdHJldGNoLlwiLFxuICAgICAgICAgICAgXCJCcmVhayB0YXNrcyBpbnRvIHNtYWxsZXIgc3RlcHMuXCIsXG4gICAgICAgICAgICBcIkFzayBhIGZyaWVuZCBvciB0ZWFjaGVyIGlmIHlvdSBuZWVkIGhlbHAuXCJcbiAgICAgICAgICBdXG4gICAgICAgIDogW1xuICAgICAgICAgICAgXCJLZWVwIGEgc3RlYWR5IHJvdXRpbmUuXCIsXG4gICAgICAgICAgICBcIkNlbGVicmF0ZSBzbWFsbCB3aW5zLlwiLFxuICAgICAgICAgICAgXCJNYWtlIHRpbWUgZm9yIHJlc3QuXCJcbiAgICAgICAgICBdLFxuICAgIHNlbnRpbWVudFNjb3JlLFxuICAgIGNvYWNoTWVzc2FnZTogcGlja0NvYWNoTWVzc2FnZSh0ZXh0Lmxlbmd0aCksXG4gICAgcmVkRmxhZzogZmFsc2VcbiAgfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEZvY3VzTW9kZVN1Z2dlc3Rpb24oaW5wdXQ6IEZvY3VzTW9kZUlucHV0KTogUHJvbWlzZTxGb2N1c01vZGVSZXNwb25zZT4ge1xuICBjb25zdCBwcm9tcHQgPSBgU3VnZ2VzdCBmb2N1cyBhbmQgYnJlYWsgbWludXRlcyBpbiBKU09OIG9ubHkuXFxuXFxuSW5wdXQ6XFxuJHtKU09OLnN0cmluZ2lmeShpbnB1dCl9XFxuXFxuUnVsZXM6XFxuLSBEZWZhdWx0IGZvY3VzIDI1IC8gYnJlYWsgNVxcbi0gU2hvcnRlciBmb2N1cyBhbmQgbG9uZ2VyIGJyZWFrcyBpZiBzdHJlc3MgaXMgSGlnaCBvciBSZWNvdmVyeSBNb2RlXFxuLSBLZWVwIGl0IHNpbXBsZVxcblxcblJldHVybiBKU09OIHdpdGgga2V5czogZm9jdXNNaW51dGVzIChudW1iZXIpLCBicmVha01pbnV0ZXMgKG51bWJlciksIHJlYXNvbiAoc3RyaW5nKS5gO1xuXG4gIGNvbnN0IGFpQ29udGVudCA9IGF3YWl0IGNhbGxBSShwcm9tcHQpO1xuICBjb25zdCBhaUpzb24gPSBzYWZlSnNvblBhcnNlPEZvY3VzTW9kZVJlc3BvbnNlPihhaUNvbnRlbnQpO1xuICBpZiAoYWlKc29uICYmIGFpSnNvbi5mb2N1c01pbnV0ZXMpIHtcbiAgICByZXR1cm4gYWlKc29uO1xuICB9XG5cbiAgY29uc3QgaXNIaWdoID0gaW5wdXQuc3RyZXNzTGV2ZWwgPT09IFwiSGlnaFwiIHx8IGlucHV0Lm1vZGUgPT09IFwiUmVjb3ZlcnkgTW9kZVwiIHx8IGlucHV0LnNlbGZTdHJlc3NMZXZlbCA+PSA0O1xuICBjb25zdCBmb2N1c01pbnV0ZXMgPSBpc0hpZ2ggPyAxNSA6IGlucHV0Lm1vZGUgPT09IFwiRXhhbSBXZWVrXCIgPyAzMCA6IDI1O1xuICBjb25zdCBicmVha01pbnV0ZXMgPSBpc0hpZ2ggPyA3IDogNTtcblxuICByZXR1cm4ge1xuICAgIGZvY3VzTWludXRlcyxcbiAgICBicmVha01pbnV0ZXMsXG4gICAgcmVhc29uOiBpc0hpZ2hcbiAgICAgID8gXCJTaG9ydGVyIGZvY3VzIGJsb2NrcyBjYW4gZmVlbCBnZW50bGVyIHdoZW4gc3RyZXNzIGlzIGhpZ2guXCJcbiAgICAgIDogXCJBIHN0ZWFkeSBmb2N1cyByaHl0aG0gaGVscHMgYnVpbGQgY29uc2lzdGVuY3kuXCJcbiAgfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFdlZWtseUluc2lnaHQoaW5wdXQ6IFdlZWtseVN1bW1hcnlJbnB1dCk6IFByb21pc2U8V2Vla2x5U3VtbWFyeVJlc3BvbnNlPiB7XG4gIGNvbnN0IHByb21wdCA9IGBXcml0ZSBvbmUgc2hvcnQsIHN1cHBvcnRpdmUgaW5zaWdodCBzZW50ZW5jZSBpbiBKU09OIG9ubHkuXFxuXFxuSW5wdXQ6XFxuJHtKU09OLnN0cmluZ2lmeShpbnB1dCl9XFxuXFxuUnVsZXM6XFxuLSBPbmUgc2VudGVuY2Vcbi0gS2VlcCBpdCBlbmNvdXJhZ2luZ1xuLSBObyBtZWRpY2FsIGNsYWltc1xuXFxuUmV0dXJuIEpTT04gd2l0aCBrZXk6IGluc2lnaHQgKHN0cmluZykuYDtcblxuICBjb25zdCBhaUNvbnRlbnQgPSBhd2FpdCBjYWxsQUkocHJvbXB0KTtcbiAgY29uc3QgYWlKc29uID0gc2FmZUpzb25QYXJzZTxXZWVrbHlTdW1tYXJ5UmVzcG9uc2U+KGFpQ29udGVudCk7XG4gIGlmIChhaUpzb24/Lmluc2lnaHQpIHtcbiAgICByZXR1cm4gYWlKc29uO1xuICB9XG5cbiAgY29uc3QgdHJlbmRUZXh0ID0gaW5wdXQuc3RyZXNzVHJlbmQgPT09IFwiVXBcIlxuICAgID8gXCJTdHJlc3MgbG9va3MgYSBiaXQgaGlnaGVyIHRoaXMgd2Vla1wiXG4gICAgOiBpbnB1dC5zdHJlc3NUcmVuZCA9PT0gXCJEb3duXCJcbiAgICAgID8gXCJTdHJlc3Mgc2VlbXMgdG8gYmUgZWFzaW5nXCJcbiAgICAgIDogXCJTdHJlc3MgbG9va3Mgc3RlYWR5XCI7XG5cbiAgcmV0dXJuIHtcbiAgICBpbnNpZ2h0OiBgJHt0cmVuZFRleHR9IOKAlCBrZWVwIGJhbGFuY2luZyBmb2N1cyB3aXRoIGJyZWFrcy5gXG4gIH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXNwb25kVG9SZWZsZWN0aW9uKGlucHV0OiBSZWZsZWN0aW9uSW5wdXQpOiBQcm9taXNlPFJlZmxlY3Rpb25SZXNwb25zZT4ge1xuICBjb25zdCBwcm9tcHQgPSBgUmVwbHkgdG8gYSBzdHVkZW50IHJlZmxlY3Rpb24gaW4gSlNPTiBvbmx5LlxcblxcbklucHV0OlxcbiR7SlNPTi5zdHJpbmdpZnkoaW5wdXQpfVxcblxcblJ1bGVzOlxcbi0gQmUgc3VwcG9ydGl2ZSBhbmQgY2FsbVxuLSBObyBtZWRpY2FsIGNsYWltc1xuLSBLZWVwIGl0IHRvIDEtMiBzZW50ZW5jZXNcblxcblJldHVybiBKU09OIHdpdGgga2V5OiBzdXBwb3J0aXZlUmVwbHkgKHN0cmluZykuYDtcblxuICBjb25zdCBhaUNvbnRlbnQgPSBhd2FpdCBjYWxsQUkocHJvbXB0KTtcbiAgY29uc3QgYWlKc29uID0gc2FmZUpzb25QYXJzZTxSZWZsZWN0aW9uUmVzcG9uc2U+KGFpQ29udGVudCk7XG4gIGlmIChhaUpzb24/LnN1cHBvcnRpdmVSZXBseSkge1xuICAgIHJldHVybiBhaUpzb247XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHN1cHBvcnRpdmVSZXBseTogXCJUaGFua3MgZm9yIHNoYXJpbmcuIFRoYXQgc291bmRzIG1lYW5pbmdmdWwg4oCUIGtlZXAgZ29pbmcgYXQgYSBzdGVhZHkgcGFjZS5cIlxuICB9O1xufVxuIl0sIm5hbWVzIjpbIlNZU1RFTV9QUk9NUFQiLCJERUZBVUxUX0JBU0VfVVJMIiwiREVGQVVMVF9NT0RFTCIsImdldEhlYWRlcnMiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJBdXRob3JpemF0aW9uIiwiY2FsbEFJIiwidXNlclByb21wdCIsImhlYWRlcnMiLCJiYXNlVXJsIiwiT1BFTkFJX0JBU0VfVVJMIiwibW9kZWwiLCJPUEVOQUlfTU9ERUwiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0ZW1wZXJhdHVyZSIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJvayIsIkVycm9yIiwic3RhdHVzIiwiZGF0YSIsImpzb24iLCJjaG9pY2VzIiwibWVzc2FnZSIsInNhZmVKc29uUGFyc2UiLCJwYXJzZSIsIkNPQUNIX01FU1NBR0VTIiwicGlja0NvYWNoTWVzc2FnZSIsInNlZWQiLCJNYXRoIiwiYWJzIiwibGVuZ3RoIiwiZGV0ZWN0UmVkRmxhZyIsInRleHQiLCJzaWduYWxzIiwic29tZSIsInNpZ25hbCIsImluY2x1ZGVzIiwiZGV0ZWN0T3ZlcmxvYWQiLCJpbnB1dCIsIm5vdGVzIiwic3ViamVjdENvdW50Iiwic3ViamVjdHMiLCJkZWFkbGluZXNEZW5zaXR5IiwiZGVhZGxpbmVzIiwiaG91cnNQZXJEYXkiLCJwdXNoIiwib3ZlcmxvYWREZXRlY3RlZCIsIm92ZXJsb2FkTm90ZXMiLCJidWlsZFJlYmFsYW5jZVBsYW4iLCJiYXNlUGxhbiIsIm1heEhvdXJzIiwibW9kZSIsInNsaWNlIiwibWFwIiwic3ViamVjdCIsImluZGV4IiwiZ2VuZXJhdGVTdHVkeVBsYW4iLCJwcm9tcHQiLCJhaUNvbnRlbnQiLCJhaUpzb24iLCJkYWlseVBsYW4iLCJtaW4iLCJ3b3JrbG9hZFdhcm5pbmciLCJicmVha1JlbWluZGVycyIsImNvYWNoTWVzc2FnZSIsInNlbGZTdHJlc3NMZXZlbCIsInJlYmFsYW5jZVBsYW4iLCJ1bmRlZmluZWQiLCJhbmFseXplU3RyZXNzIiwic3RyZXNzTGV2ZWwiLCJ0b0xvd2VyQ2FzZSIsInJlZEZsYWciLCJzdXBwb3J0aXZlTWVzc2FnZSIsInByYWN0aWNhbEFkdmljZSIsInNlbnRpbWVudFNjb3JlIiwicmVkRmxhZ01lc3NhZ2UiLCJoaWdoU2lnbmFscyIsIm1lZGl1bVNpZ25hbHMiLCJoYXNIaWdoIiwid29yZCIsImhhc01lZGl1bSIsImdldEZvY3VzTW9kZVN1Z2dlc3Rpb24iLCJmb2N1c01pbnV0ZXMiLCJpc0hpZ2giLCJicmVha01pbnV0ZXMiLCJyZWFzb24iLCJnZXRXZWVrbHlJbnNpZ2h0IiwiaW5zaWdodCIsInRyZW5kVGV4dCIsInN0cmVzc1RyZW5kIiwicmVzcG9uZFRvUmVmbGVjdGlvbiIsInN1cHBvcnRpdmVSZXBseSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/ai.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffocus-mode%2Froute&page=%2Fapi%2Ffocus-mode%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffocus-mode%2Froute.ts&appDir=%2FUsers%2Flizamamitashvili%2Fstudysafeai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flizamamitashvili%2Fstudysafeai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();